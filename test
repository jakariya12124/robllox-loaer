--// FULL ANTI-DETECT FLY WITH GUI BUTTON

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local hum = char:WaitForChild("Humanoid")

local flySpeed = 0.6
local liftPower = 1.2

local flying = false

-- Create GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FlyGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local flyButton = Instance.new("TextButton")
flyButton.Size = UDim2.new(0, 100, 0, 50)
flyButton.Position = UDim2.new(0.05, 0, 0.85, 0)
flyButton.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
flyButton.TextColor3 = Color3.new(1, 1, 1)
flyButton.Text = "Fly: OFF"
flyButton.Font = Enum.Font.SourceSansBold
flyButton.TextSize = 22
flyButton.AutoButtonColor = true
flyButton.Parent = screenGui

flyButton.MouseButton1Click:Connect(function()
	flying = not flying
	hum.PlatformStand = flying
	flyButton.Text = flying and "Fly: ON" or "Fly: OFF"
end)

-- Fly loop
RunService.RenderStepped:Connect(function()
	if flying and hrp and hum.Health > 0 then
		local dir = hum.MoveDirection
		hrp.CFrame = hrp.CFrame + (dir * flySpeed) + Vector3.new(0, liftPower * 0.05, 0)
	end
end)

-- ANTI-KICK
local mt = getrawmetatable(game)
setreadonly(mt, false)
local oldNamecall = mt.__namecall
mt.__namecall = newcclosure(function(self, ...)
	local method = getnamecallmethod()
	if method == "Kick" or method == "kick" then
		warn("[ANTI-KICK] Server tried to kick you. Blocked.")
		return nil
	end
	return oldNamecall(self, ...)
end)

-- BLOCK COMMON REMOTES
local blockedNames = {"kick", "ban", "cheat", "detect", "flag", "log", "punish"}
for _, obj in ipairs(getgc(true)) do
	if typeof(obj) == "table" then
		for k, v in pairs(obj) do
			if typeof(v) == "function" and typeof(k) == "string" then
				for _, b in ipairs(blockedNames) do
					if k:lower():find(b) then
						obj[k] = function(...) return nil end
						warn("[ANTI-REMOTE] Blocked function:", k)
					end
				end
			end
		end
	end
end
